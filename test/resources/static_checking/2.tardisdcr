# ==========================================
# information flow section - ignored for now
# ------------------------------------------
# security labels / parametrised roles
Top
Admin
ClerkLevel
DoctorLevel (String) 
PatientLevel (String)
Public
Bot
;
# security lattice / information flow 
Bot flows Public
Public flows ClerkLevel
Public flows PatientLevel
Public flows DoctorLevel
ClerkLevel flows Admin
PatientLevel flows Admin
DoctorLevel flows Admin
Admin flows Top
;


(createDoctor: createDoctor) (Admin;Public) [?: {name:String}] [ Admin ]
(createPatient: createPatient) (Admin;ClerkLevel,DoctorLevel(Lower),PatientLevel(Lower)) [?: {name:String}]  [Admin ]
;
createDoctor  -->> {
    (doctor:Doctor) (Admin;Public) [{name:@trigger.value.name}] [Admin]
    (addAppointment:addAppointment) (ClerkLevel;ClerkLevel,DoctorLevel(@trigger.value.name),PatientLevel(Lower)) [?: {patient:Patient,doctor:Doctor}]  [Admin]
    ;
    addAppointment -->> {
            (appointment:appointment) (ClerkLevel,DoctorLevel(@trigger.value.doctor.name);ClerkLevel,DoctorLevel(@trigger.value.doctor.name),PatientLevel(@trigger.value.patient.name)) [{patient:@trigger.value.patient}] [Admin]
             
    }
    
}
createPatient  -->> {
        (patient:Patient) (Admin;ClerkLevel, DoctorLevel(Lower), PatientLevel(@trigger.value.name)) [{name:@trigger.value.name}] [Admin]
        


}


